# S-IA-30-2: Compliance Heatmap

**Epic:** E-30 (LCME Compliance Engine)
**Feature:** F-14
**Sprint:** 39
**Lane:** institutional_admin (P2)
**Size:** M

## User Story
As an **institutional admin**, I need an interactive 12-standard compliance heatmap so that I can quickly identify which LCME standards are met, partially met, or unmet across the institution.

## Acceptance Criteria
- [ ] Heatmap grid: 12 standards (rows) x elements (columns) within each standard
- [ ] Cell color: green (met, 100%), yellow (partial, 50-99%), orange (partial, 1-49%), red (unmet, 0%)
- [ ] Hover tooltip: element name, compliance percentage, evidence count
- [ ] Click cell to navigate to element drill-down (S-IA-30-3)
- [ ] Standard-level summary row showing aggregate compliance
- [ ] Overall institution compliance score displayed prominently
- [ ] Legend explaining color scale
- [ ] Print-friendly layout option
- [ ] Responsive: scrollable on smaller screens with sticky header
- [ ] Last computed timestamp displayed
- [ ] Recompute button triggering fresh computation

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/compliance/compliance.types.ts` (extend) |
| Service | apps/server | `src/modules/compliance/services/compliance-computation.service.ts` (extend) |
| Controller | apps/server | `src/modules/compliance/controllers/compliance.controller.ts` (extend) |
| View | apps/web | `src/app/(dashboard)/admin/compliance/page.tsx` |
| Component | apps/web | `src/components/compliance/compliance-heatmap.tsx` |
| Component | apps/web | `src/components/compliance/heatmap-cell.tsx` |
| Component | apps/web | `src/components/compliance/compliance-legend.tsx` |
| API Tests | apps/server | `src/modules/compliance/__tests__/compliance-heatmap-data.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-IA-30-1 (compliance computation data)
- **Cross-epic:** none

## Notes
- Heatmap rendering with D3.js for custom cell rendering and interactions.
- Color scale uses design tokens; do not hardcode hex values.
- Print layout: media query for print, simplified colors for grayscale printers.
- Heatmap data structure: nested array of standards -> elements -> compliance score.
