# S-F-12-4: TEACHES Relationship Creation

**Epic:** E-12 (AI Concept Extraction)
**Feature:** F-06
**Sprint:** 5
**Lane:** faculty (P3)
**Size:** S

## User Story
As a **Faculty member**, I need courses automatically linked to their extracted SubConcepts via TEACHES relationships so that the knowledge graph reflects what each course covers.

## Acceptance Criteria
- [ ] TEACHES relationship created in Neo4j: `(Course)-[:TEACHES]->(SubConcept)`
- [ ] Relationship properties: status ('unverified'), created_at, source_content_id
- [ ] Service creates TEACHES for each SubConcept extracted from a course's content
- [ ] Dedup: no duplicate TEACHES relationships between the same Course and SubConcept
- [ ] DualWriteService: relationship tracked in Supabase junction table + Neo4j edge
- [ ] 5-8 API tests for relationship creation, dedup, status field, dual-write

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/concept/teaches.types.ts` |
| Repository | apps/server | `src/repositories/teaches.repository.ts` |
| Service | apps/server | `src/services/teaches.service.ts` |
| Tests | apps/server | `src/tests/teaches.service.test.ts` |

## Dependencies
- **Blocks:** S-F-13-1, S-F-13-2
- **Blocked by:** S-F-12-1 (SubConcepts must be extracted)
- **Cross-epic:** S-F-08-1 (courses must exist)

## Notes
- TEACHES with status 'unverified' transitions to TEACHES_VERIFIED after faculty review (E-13)
- In Neo4j, the relationship type changes: TEACHES -> TEACHES_VERIFIED (not a property change, but a relationship type swap)
- Supabase junction table: `course_subconcept` with columns: course_id, subconcept_id, status, source_content_id, created_at
- One SubConcept can be TEACHES by multiple courses (many-to-many)
- Relationship creation runs as the final step of the extraction pipeline
