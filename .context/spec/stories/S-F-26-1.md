# S-F-26-1: Blueprint Definition Model

**Epic:** E-26 (Blueprint & Assembly Engine)
**Feature:** F-12
**Sprint:** 29
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **faculty member**, I need to define an exam blueprint with target distributions across USMLE systems, disciplines, and Bloom's taxonomy levels so that I can ensure my exam covers the curriculum proportionally.

## Acceptance Criteria
- [ ] Blueprint model with target percentages per dimension: USMLE system, discipline, Bloom level
- [ ] Percentages per dimension must sum to 100% (validation)
- [ ] Blueprint metadata: name, description, total question count, time limit, passing score
- [ ] CRUD operations for blueprints (create, read, update, delete)
- [ ] Blueprint versioning: immutable once an exam is built from it
- [ ] Repository layer with Supabase storage + Neo4j dual-write
- [ ] Neo4j relationship: (Blueprint)-[:TARGETS]->(USMLE_System) with weight property
- [ ] Seed data: default USMLE Step 1 blueprint with standard distributions
- [ ] Validation: at least one target per dimension required
- [ ] Soft delete with audit trail

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/exam/blueprint.types.ts` |
| Model | apps/server | `src/modules/exam/models/blueprint.model.ts` |
| Repository | apps/server | `src/modules/exam/repositories/blueprint.repository.ts` |
| Service | apps/server | `src/modules/exam/services/blueprint.service.ts` |
| Controller | apps/server | `src/modules/exam/controllers/blueprint.controller.ts` |
| Route | apps/server | `src/modules/exam/routes/blueprint.routes.ts` |
| Seed | apps/server | `src/modules/exam/seeds/default-blueprint.seed.ts` |
| API Tests | apps/server | `src/modules/exam/__tests__/blueprint.service.test.ts` |
| API Tests | apps/server | `src/modules/exam/__tests__/blueprint.repository.test.ts` |

## Dependencies
- **Blocks:** S-F-26-2, S-F-26-3, S-F-26-4
- **Blocked by:** S-F-25-1 (item bank exists), S-IA-28-1 (coverage data)
- **Cross-epic:** none

## Notes
- DualWriteService: Supabase `blueprints` table first, then Neo4j Blueprint node with TARGETS relationships.
- USMLE systems use SCREAMING_SNAKE_CASE labels in Neo4j (e.g., USMLE_Cardiovascular).
- Bloom levels: Remember, Understand, Apply, Analyze, Evaluate, Create.
- Blueprint is the foundation for the entire exam assembly pipeline.
