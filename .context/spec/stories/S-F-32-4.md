# S-F-32-4: Role-Based Dashboard Variants

**Epic:** E-32 (Faculty Dashboard)
**Feature:** F-15
**Sprint:** 8
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **Faculty member, Course Director, or Institutional Admin**, I need the dashboard to show role-appropriate content so that each persona sees the metrics and actions most relevant to their responsibilities.

## Acceptance Criteria
- [ ] Dashboard layout composed of: KPI Strip + Activity Feed + Course Cards (from S-F-32-1/2/3)
- [ ] Faculty variant: personal KPIs, own activity, assigned courses
- [ ] Course Director variant: program-level KPIs, program activity, all program courses, faculty performance summary
- [ ] Institutional Admin variant: institution-level KPIs, institution activity, all courses, coverage overview link
- [ ] Role detection from auth context (`useAuth` hook), no role prop drilling
- [ ] Conditional sections: Course Director sees "Faculty Performance" table; Admin sees "Coverage Summary" widget
- [ ] FacultyDashboardPage template composes all sections with correct variant
- [ ] 8-10 API tests: role detection, variant rendering, conditional sections, KPI scoping per role
- [ ] Named exports only, TypeScript strict, design tokens only

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/dashboard/dashboard.types.ts` |
| Molecules | packages/ui | `src/molecules/faculty-performance-table.tsx`, `src/molecules/coverage-summary-widget.tsx` |
| Templates | apps/web | `src/components/dashboard/faculty-dashboard-page.tsx` |
| Pages | apps/web | `src/app/(faculty)/dashboard/page.tsx` |
| Hooks | apps/web | `src/hooks/use-dashboard-variant.ts` |
| Tests | apps/web | `src/tests/dashboard/faculty-dashboard-page.test.tsx`, `src/tests/dashboard/dashboard-variant.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-F-32-1, S-F-32-2, S-F-32-3, S-U-01-3 (auth/RBAC)
- **Cross-epic:** S-U-01-3 (Sprint 3 auth)

## Notes
- Role hierarchy for dashboard scoping: `institutional_admin` > `course_director` > `faculty`
- `useDashboardVariant` hook returns `{ variant, scope }` based on user's highest role
- Faculty Performance table (Course Director only): rows = faculty members, columns = questions generated, approval rate, active courses
- Coverage Summary widget (Admin only): mini heatmap thumbnail with link to full `/coverage` page
- All KPI and activity API calls include `scope` parameter: `personal`, `program`, or `institution`
- Route: `/dashboard` â€” same route for all roles, content varies by auth context
