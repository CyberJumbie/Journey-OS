# S-F-19-3: ContextPanel Component

**Epic:** E-19 (Workbench UI)
**Feature:** F-09
**Sprint:** 7
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **Faculty member**, I need a context panel showing source material, concept graph, and framework tags so that I can reference curriculum context while generating questions and ensure alignment with learning objectives.

## Acceptance Criteria
- [ ] ContextPanel organism with three collapsible sections: Source Material, Concept Graph, Framework Tags
- [ ] Source Material section: lists uploaded documents with preview, filtered by selected course/SLO
- [ ] Concept Graph section: mini force-directed graph of SubConcepts linked to selected SLO (D3 or react-force-graph)
- [ ] Framework Tags section: displays USMLE system, discipline, and Bloom's level tags for the current generation scope
- [ ] Data fetching: loads context based on selected course and SLO from URL params
- [ ] Clickable concepts: clicking a concept node in the graph adds it to generation scope
- [ ] Skeleton loading states for each section
- [ ] Empty states with action prompts ("Upload source material" links to content upload)
- [ ] 8-10 API tests: section rendering, data fetching, concept interaction, empty states, loading states
- [ ] Named exports only, TypeScript strict, design tokens only

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/workbench/context.types.ts` |
| Atoms | packages/ui | `src/atoms/tag-chip.tsx`, `src/atoms/document-card.tsx` |
| Molecules | packages/ui | `src/molecules/collapsible-section.tsx` |
| Organisms | apps/web | `src/components/workbench/context-panel.tsx`, `src/components/workbench/mini-concept-graph.tsx`, `src/components/workbench/source-material-list.tsx`, `src/components/workbench/framework-tags.tsx` |
| Hooks | apps/web | `src/hooks/use-course-context.ts` |
| Tests | apps/web | `src/tests/workbench/context-panel.test.tsx`, `src/tests/workbench/mini-concept-graph.test.tsx` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-F-19-1 (SplitPane layout)
- **Cross-epic:** S-F-12-1 (concepts), S-IA-14-2 (SLOs), S-U-16-4 (frameworks)

## Notes
- Mini concept graph is a simplified version of the full concept graph in E-28 â€” reuse D3 force layout but smaller viewport
- Framework tags are read from Neo4j: `(SLO)-[:MAPS_TO]->(USMLE_Topic)-[:BELONGS_TO]->(USMLE_System)` and `(SLO)-[:MAPS_TO]->(USMLE_Topic)-[:BELONGS_TO]->(USMLE_Discipline)`
- Source material fetched from Supabase `uploaded_documents` table, filtered by course_id
- Collapsible sections default: Source Material open, Concept Graph open, Framework Tags open
- Concept graph interaction: clicking a node dispatches to workbench state, updating the generation scope parameters
