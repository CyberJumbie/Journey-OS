# S-F-27-3: Retired Exam Import

**Epic:** E-27 (Exam Assignment & Export)
**Feature:** F-12
**Sprint:** 30
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **faculty member**, I need to upload historical/retired exams with response data so that the IRT calibration engine has sufficient data for item parameter estimation.

## Acceptance Criteria
- [ ] Upload page for retired exam files (CSV, QTI, JSON formats)
- [ ] File validation: check format, required columns, data types
- [ ] Preview of parsed items before import confirmation
- [ ] Import maps items to existing USMLE systems and disciplines
- [ ] Response data import: student responses (anonymized) for IRT calibration
- [ ] Items tagged as 'retired' status (not available for new exams)
- [ ] Import summary: items imported, items skipped (duplicates), errors
- [ ] Bulk import: support up to 1000 items per file
- [ ] API endpoint: POST /api/exams/import/retired
- [ ] Rollback capability: delete entire import batch on error

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/exam/import.types.ts` |
| Service | apps/server | `src/modules/exam/services/retired-exam-import.service.ts` |
| Service | apps/server | `src/modules/exam/services/importers/csv-importer.ts` |
| Service | apps/server | `src/modules/exam/services/importers/qti-importer.ts` |
| Controller | apps/server | `src/modules/exam/controllers/retired-exam-import.controller.ts` |
| Route | apps/server | `src/modules/exam/routes/retired-exam-import.routes.ts` |
| View | apps/web | `src/components/exam/retired-exam-import.tsx` |
| Component | apps/web | `src/components/exam/import-preview-table.tsx` |
| API Tests | apps/server | `src/modules/exam/__tests__/retired-exam-import.service.test.ts` |
| API Tests | apps/server | `src/modules/exam/__tests__/csv-importer.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-F-26-1 (blueprint/item model exists)
- **Cross-epic:** S-ST-40-2 depends on this (IRT calibration needs historical response data)

## Notes
- Importer pattern mirrors exporter: strategy pattern with format-specific implementations.
- Anonymized response data format: item_id, response (A-E), correct (bool), response_time_ms.
- Bulk import uses database transactions for atomicity.
- Retired items are read-only; no edits allowed after import.
- File size limit: 50MB per upload.
