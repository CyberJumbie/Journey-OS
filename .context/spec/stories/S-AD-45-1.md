# S-AD-45-1: Advisor Dashboard Page

**Epic:** E-45 (Advisor Cohort Dashboard & Interventions)
**Feature:** F-21
**Sprint:** 38
**Lane:** advisor (P5)
**Size:** L

## User Story
As an **academic advisor**, I need a dashboard showing my at-risk students with risk scores and concept-level diagnostics so that I can prioritize my interventions and understand each student's specific challenges.

## Acceptance Criteria
- [ ] Dashboard page at `/dashboard/advisor` with role-based route guard
- [ ] At-risk student list sorted by risk severity (critical first)
- [ ] Per student card: name, risk level badge, confidence score, top 3 struggling concepts
- [ ] Risk distribution chart: pie/donut showing low/moderate/high/critical counts
- [ ] Filter: by risk level, by cohort, by course
- [ ] Search: by student name or ID
- [ ] Click student to expand full concept diagnostic view
- [ ] Concept diagnostic: prerequisite chain visualization showing root causes
- [ ] Unacknowledged flag count badge in navigation
- [ ] Quick action buttons: acknowledge flag, schedule meeting, view history
- [ ] Responsive layout with card grid
- [ ] Loading skeletons and empty states
- [ ] Real-time flag count via SSE (new flags during session)

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/advisor/dashboard.types.ts` |
| Model | apps/server | `src/modules/advisor/models/advisor-dashboard.model.ts` |
| Repository | apps/server | `src/modules/advisor/repositories/advisor-dashboard.repository.ts` |
| Service | apps/server | `src/modules/advisor/services/advisor-dashboard.service.ts` |
| Controller | apps/server | `src/modules/advisor/controllers/advisor-dashboard.controller.ts` |
| Route | apps/server | `src/modules/advisor/routes/advisor-dashboard.routes.ts` |
| View | apps/web | `src/app/(dashboard)/advisor/page.tsx` |
| Component | apps/web | `src/components/advisor/at-risk-student-card.tsx` |
| Component | apps/web | `src/components/advisor/risk-distribution-chart.tsx` |
| Component | apps/web | `src/components/advisor/concept-diagnostic-view.tsx` |
| Component | apps/web | `src/components/advisor/prerequisite-chain-viz.tsx` |
| Template | apps/web | `src/components/templates/advisor-dashboard-template.tsx` |
| API Tests | apps/server | `src/modules/advisor/__tests__/advisor-dashboard.service.test.ts` |
| API Tests | apps/server | `src/modules/advisor/__tests__/advisor-dashboard.controller.test.ts` |
| E2E | apps/web | `e2e/advisor-dashboard.spec.ts` |

## Dependencies
- **Blocks:** S-AD-45-2, S-AD-45-3
- **Blocked by:** S-AD-44-4 (risk flags must exist)
- **Cross-epic:** Reads risk flags from E-44, student data from E-07

## Notes
- Prerequisite chain visualization uses D3.js force-directed graph or tree layout.
- SSE for real-time flag updates uses the project's SSE pattern (not Socket.io).
- Advisor sees only students in their assigned cohorts (RBAC filter).
- Dashboard data joins Supabase (risk_flags, students) with Neo4j (concept diagnostics, prerequisite chains).
