# S-IA-15-2: Framework Linking Service

**Epic:** E-15 (Objective Mapping & Framework Linking)
**Feature:** F-07
**Sprint:** 5
**Lane:** institutional_admin (P2)
**Size:** M

## User Story
As an **Institutional Admin**, I need to link ILOs and SLOs to accreditation framework nodes so that curriculum alignment to external standards (Bloom, competencies, LCME, EPA, UME) is tracked.

## Acceptance Criteria
- [ ] Five relationship types supported: AT_BLOOM, MAPS_TO_COMPETENCY, ADDRESSES_LCME, MAPS_TO_EPA, MAPS_TO_UME
- [ ] FrameworkLinkingService creates typed relationships between objectives and framework nodes
- [ ] Framework node types: BloomLevel, Competency, LCMEStandard, EPA, UMEOutcome
- [ ] Relationships stored in Neo4j with DualWriteService tracking in Supabase
- [ ] Validation: framework node must exist before linking (seeded in E-16)
- [ ] CRUD for framework links: create, read, delete (no update; delete and re-create)
- [ ] 10-12 API tests covering each relationship type, validation, dedup, dual-write

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/objective/framework-link.types.ts` |
| Service | apps/server | `src/services/frameworkLinking.service.ts` |
| Repository | apps/server | `src/repositories/frameworkLink.repository.ts` |
| Tests | apps/server | `src/tests/frameworkLinking.service.test.ts` |

## Dependencies
- **Blocks:** S-IA-15-3
- **Blocked by:** S-U-16-4 (framework nodes must be seeded), S-IA-14-1 (ILOs must exist)
- **Cross-epic:** E-16 (framework seeding provides target nodes)

## Notes
- Neo4j relationships (all typed with direction):
  - `(ILO)-[:AT_BLOOM]->(BloomLevel)`
  - `(SLO)-[:MAPS_TO_COMPETENCY]->(Competency)`
  - `(ILO)-[:ADDRESSES_LCME]->(LCMEStandard)`
  - `(SLO)-[:MAPS_TO_EPA]->(EPA)`
  - `(SLO)-[:MAPS_TO_UME]->(UMEOutcome)`
- Framework nodes are seeded (read-only for users); only relationships are user-created
- Dedup: check for existing relationship before creating (no duplicate edges)
- Custom error class: `FrameworkNodeNotFoundError` when linking to non-existent framework node
