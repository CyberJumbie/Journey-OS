# S-F-08-2: Course Hierarchy

**Epic:** E-08 (Course CRUD & Hierarchy)
**Feature:** F-04
**Sprint:** 4
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **Faculty member**, I need courses organized in a hierarchy (Institution > Program > Course > Section > Session) so that curriculum structure is navigable and well-organized.

## Acceptance Criteria
- [ ] Program, Section, and Session TypeScript types defined
- [ ] Program model with institution_id scope
- [ ] Section model with course_id scope and ordering
- [ ] Session model with section_id scope, week number, and scheduling fields
- [ ] Repository layer for Program, Section, Session with CRUD operations
- [ ] Service layer enforcing hierarchy constraints (section belongs to course, session belongs to section)
- [ ] Neo4j relationships: `(Program)-[:OFFERS]->(Course)-[:HAS_SECTION]->(Section)-[:HAS_SESSION]->(Session)`
- [ ] DualWriteService for all three entity types
- [ ] 10-12 API tests covering hierarchy CRUD, constraint validation, cascading reads

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/course/hierarchy.types.ts` |
| Model | apps/server | `src/models/program.model.ts`, `src/models/section.model.ts`, `src/models/session.model.ts` |
| Repository | apps/server | `src/repositories/program.repository.ts`, `src/repositories/section.repository.ts`, `src/repositories/session.repository.ts` |
| Service | apps/server | `src/services/hierarchy.service.ts` |
| Tests | apps/server | `src/tests/hierarchy.service.test.ts` |

## Dependencies
- **Blocks:** S-F-08-3
- **Blocked by:** S-F-08-1 (course model must exist)
- **Cross-epic:** none

## Notes
- Section ordering uses a `position` integer field for drag-and-drop reordering
- Sessions contain `week_number`, `day_of_week`, `start_time`, `end_time` for scheduling
- Cascading read: fetching a course returns its sections and sessions in a nested structure
- Neo4j traversal: use single query to fetch full hierarchy subtree for a course
