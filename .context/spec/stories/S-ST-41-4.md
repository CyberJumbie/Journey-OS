# S-ST-41-4: Session Summary

**Epic:** E-41 (Adaptive Practice UI)
**Feature:** F-19
**Sprint:** 32
**Lane:** student (P4)
**Size:** M

## User Story
As a **medical student**, I need a session summary showing mastery changes, concept breakdown, and study recommendations so that I can understand what I learned and plan my next session.

## Acceptance Criteria
- [ ] Session summary page displayed after last question
- [ ] Overall score: correct/total with percentage
- [ ] Time spent: total duration and average per question
- [ ] Mastery changes: before/after mastery per concept practiced
- [ ] Concept breakdown table: concept name, questions, correct, mastery delta
- [ ] Strongest/weakest concepts highlighted
- [ ] Recommendations: "Focus on [concept] next" based on lowest mastery
- [ ] Option to start new session with recommended focus
- [ ] Option to return to dashboard
- [ ] Session record finalized in database (status: completed)
- [ ] Share/export session results (optional, future)

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/practice/session-summary.types.ts` |
| Service | apps/server | `src/modules/practice/services/session-summary.service.ts` |
| Controller | apps/server | `src/modules/practice/controllers/session-summary.controller.ts` |
| Route | apps/server | `src/modules/practice/routes/session-summary.routes.ts` |
| View | apps/web | `src/app/(dashboard)/practice/session/[sessionId]/summary/page.tsx` |
| Component | apps/web | `src/components/practice/session-score-card.tsx` |
| Component | apps/web | `src/components/practice/concept-breakdown-table.tsx` |
| Component | apps/web | `src/components/practice/study-recommendations.tsx` |
| API Tests | apps/server | `src/modules/practice/__tests__/session-summary.service.test.ts` |
| API Tests | apps/server | `src/modules/practice/__tests__/session-summary.controller.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-ST-41-1 (session exists), S-ST-41-2 (questions answered)
- **Cross-epic:** Session data feeds into S-ST-42-4 (session history) and S-ST-43-1 (trend charts)

## Notes
- Session summary data computed server-side from session response records.
- Mastery before/after requires snapshot of mastery state at session start (stored on creation).
- Recommendations algorithm: rank concepts by (mastery_level ASC, questions_practiced DESC).
- "Start new session" pre-fills scope with recommended concepts.
