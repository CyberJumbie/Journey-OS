# S-F-22-3: Automation Level Configuration

**Epic:** E-22 (Critic Agent & Review Router)
**Feature:** F-10
**Sprint:** 13
**Lane:** faculty (P3)
**Size:** S

## User Story
As an **Institutional Admin**, I need to configure the automation level for question review so that our institution can choose between full automation, checkpoint-based, or fully manual review workflows.

## Acceptance Criteria
- [ ] Three automation levels: `full_auto`, `checkpoints`, `manual`
- [ ] `full_auto`: critic scores drive auto-approve/reject, minimal human touch
- [ ] `checkpoints`: auto-reject works, but all approvals require human confirmation
- [ ] `manual`: all items route to human review regardless of critic scores
- [ ] Setting stored per institution in Supabase `institution_settings` table
- [ ] Settings page UI for institutional admin to toggle level
- [ ] Router service reads automation level before applying routing logic
- [ ] 5-8 API tests: each level behavior, default fallback, setting persistence
- [ ] TypeScript strict, named exports only

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/review/automation.types.ts` |
| Service | apps/server | `src/services/review/automation-config.service.ts` |
| Repository | apps/server | `src/repositories/institution-settings.repository.ts` (extend) |
| Controller | apps/server | `src/controllers/review/automation-config.controller.ts` |
| View | apps/web | `src/app/(dashboard)/admin/settings/automation/page.tsx` |
| Tests | apps/server | `src/tests/review/automation-config.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-F-22-2 (router exists to respect automation level)
- **Cross-epic:** none

## Notes
- Default automation level for new institutions: `checkpoints` (safe middle ground)
- Only `institutional_admin` and `superadmin` roles can change automation level
- Changing automation level does not retroactively affect items already in the queue
- UI should show a clear explanation of each level with expected review volume impact
- Consider audit log entry when automation level is changed
