# S-F-32-1: Activity Feed Component

**Epic:** E-32 (Faculty Dashboard)
**Feature:** F-15
**Sprint:** 8
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **Faculty member**, I need an activity feed showing recent generation, review, and approval events so that I can quickly see what has happened across my courses and stay up to date on question development progress.

## Acceptance Criteria
- [ ] ActivityFeed organism renders chronological list of recent events
- [ ] Event types: question_generated, question_reviewed, question_approved, question_rejected, coverage_gap_detected, bulk_generation_complete
- [ ] Each event shows: icon, event description, course name, timestamp (relative: "2h ago"), actor name
- [ ] Events fetched from `/api/activity?user_id=X&limit=20&offset=0`
- [ ] Infinite scroll pagination (load more on scroll to bottom)
- [ ] Filter by event type (multi-select dropdown)
- [ ] Empty state: "No recent activity" with prompt to start generating
- [ ] Real-time updates: new events prepend to feed without page refresh (polling every 30s)
- [ ] 8-10 API tests: rendering, event types, pagination, filtering, empty state, real-time update
- [ ] Named exports only, TypeScript strict, design tokens only

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/dashboard/activity.types.ts` |
| Atoms | packages/ui | `src/atoms/activity-icon.tsx`, `src/atoms/relative-time.tsx` |
| Molecules | packages/ui | `src/molecules/activity-event-row.tsx` |
| Organisms | apps/web | `src/components/dashboard/activity-feed.tsx` |
| Service | apps/server | `src/services/activity/activity-feed.service.ts` |
| Repository | apps/server | `src/repositories/activity.repository.ts` |
| Controller | apps/server | `src/controllers/activity.controller.ts` |
| Hooks | apps/web | `src/hooks/use-activity-feed.ts` |
| Tests | apps/web | `src/tests/dashboard/activity-feed.test.tsx` |
| Tests | apps/server | `src/tests/activity/activity-feed.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-U-01-3 (auth/RBAC)
- **Cross-epic:** S-IA-29-3 (gap alerts appear in feed)

## Notes
- Activity events stored in Supabase `activity_events` table: `{ id, user_id, institution_id, event_type, entity_id, entity_type, metadata JSONB, created_at }`
- Events are written by other services (generation, review, coverage) â€” ActivityFeedService is read-only
- Polling (30s) is acceptable for MVP; Socket.io real-time upgrade planned for E-35
- Infinite scroll: use `IntersectionObserver` on a sentinel element at bottom of feed
- Relative time formatting: use `date-fns/formatDistanceToNow`
- Activity icons use Lucide icons from shadcn/ui icon set, mapped by event_type
