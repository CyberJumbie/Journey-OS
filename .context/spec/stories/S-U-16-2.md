# S-U-16-2: Seed Script Infrastructure

**Epic:** E-16 (Framework Seeding)
**Feature:** F-08
**Sprint:** 1
**Lane:** universal (P0)
**Size:** S

## User Story
As a **platform engineer**, I need an idempotent MERGE-based seeding scaffold so that framework data can be loaded into Neo4j without creating duplicates on repeated runs.

## Acceptance Criteria
- [ ] `pnpm kg:seed` CLI command registered in root package.json
- [ ] SeedRunner service orchestrates seeding across all frameworks
- [ ] Each framework has a dedicated seeder class implementing a common Seeder interface
- [ ] All Cypher uses MERGE (not CREATE) to ensure idempotency
- [ ] Seed script is re-runnable: running twice produces no duplicates
- [ ] Unique constraints verified before seeding begins
- [ ] Console output logs node counts per framework after completion
- [ ] Error handling: partial failures do not corrupt existing data

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | src/frameworks/seeder.types.ts |
| Service | apps/server | src/services/seed/seed-runner.service.ts, src/services/seed/base-seeder.ts |
| Scripts | apps/server | scripts/seed-frameworks.ts |
| Config | root | package.json (kg:seed script) |

## Dependencies
- **Blocks:** S-U-16-3, S-U-16-4
- **Blocked by:** S-U-16-1
- **Cross-epic:** none

## Notes
- Constructor DI for Neo4j driver instance into SeedRunner and each seeder.
- BaseSeeder abstract class with `seed()` and `verify()` methods.
- MERGE pattern: `MERGE (n:USMLE_System {framework_id: $id}) ON CREATE SET n += $props ON MATCH SET n.updated_at = timestamp()`.
- Transaction batching: batch MERGE statements in groups of 50 to avoid memory pressure.
