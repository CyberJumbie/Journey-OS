# S-F-08-1: Course Model & Repository

**Epic:** E-08 (Course CRUD & Hierarchy)
**Feature:** F-04
**Sprint:** 4
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **Faculty member**, I need course CRUD operations with dual-write to Supabase and Neo4j so that course data stays consistent across both datastores.

## Acceptance Criteria
- [ ] Course TypeScript types defined with strict typing (id, title, code, description, credits, academic_year, status, institution_id, program_id, course_director_id)
- [ ] Course model class with private fields, public getters, constructor DI
- [ ] CourseRepository with create, read, update, soft-delete operations
- [ ] DualWriteService integration: Supabase first, Neo4j second, sync_status tracked
- [ ] CourseService with business logic validation (unique course code per institution, credit range validation)
- [ ] Course Director assignment via relationship update
- [ ] 10-12 API tests covering CRUD, validation errors, dual-write consistency, and CD assignment
- [ ] Named exports only, no default exports

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/course/course.types.ts` |
| Model | apps/server | `src/models/course.model.ts` |
| Repository | apps/server | `src/repositories/course.repository.ts` |
| Service | apps/server | `src/services/course.service.ts` |
| Tests | apps/server | `src/tests/course.service.test.ts`, `src/tests/course.repository.test.ts` |

## Dependencies
- **Blocks:** S-F-08-2, S-F-08-3, S-F-08-4, S-IA-09-1, S-F-10-1, S-IA-14-2
- **Blocked by:** S-U-01-3 (RBAC middleware), S-IA-06-1 (institution users exist)
- **Cross-epic:** S-U-01-3 (Sprint 3 auth)

## Notes
- Neo4j label: `Course` (PascalCase per convention)
- Relationship: `(Institution)-[:HAS_PROGRAM]->(Program)-[:OFFERS]->(Course)`
- Course Director is a user with `course_director` role assigned via `(User)-[:DIRECTS]->(Course)`
- Soft-delete: set status to `archived`, never hard-delete
- DualWriteService pattern: write to Supabase, get ID, write to Neo4j with same ID, update sync_status
