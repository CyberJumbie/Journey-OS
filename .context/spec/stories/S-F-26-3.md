# S-F-26-3: Exam Builder UI

**Epic:** E-26 (Blueprint & Assembly Engine)
**Feature:** F-12
**Sprint:** 29
**Lane:** faculty (P3)
**Size:** L

## User Story
As a **faculty member**, I need a drag-and-drop exam builder with a live blueprint compliance meter so that I can assemble exams interactively while ensuring coverage targets are met.

## Acceptance Criteria
- [ ] Exam builder page at `/exams/builder/:blueprintId`
- [ ] Left panel: recommended items list with search, filter by system/discipline/Bloom
- [ ] Right panel: exam item sequence (drag-and-drop reorder)
- [ ] Drag items from recommendations to exam; drag to remove
- [ ] Live blueprint compliance meter: real-time coverage percentage per dimension
- [ ] Visual indicators: green (on target), yellow (below), red (critically under)
- [ ] Exam metadata form: title, description, time limit, passing score
- [ ] Save as draft functionality
- [ ] Item count and total time estimate display
- [ ] Undo/redo for item additions and removals
- [ ] Keyboard accessible drag-and-drop (a11y)
- [ ] Performance: smooth drag with 200+ items loaded
- [ ] Autosave every 30 seconds

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/exam/exam-builder.types.ts` |
| Service | apps/server | `src/modules/exam/services/exam-builder.service.ts` |
| Controller | apps/server | `src/modules/exam/controllers/exam-builder.controller.ts` |
| Route | apps/server | `src/modules/exam/routes/exam-builder.routes.ts` |
| View | apps/web | `src/app/(dashboard)/exams/builder/[blueprintId]/page.tsx` |
| Component | apps/web | `src/components/exam/item-recommendation-panel.tsx` |
| Component | apps/web | `src/components/exam/exam-sequence-panel.tsx` |
| Component | apps/web | `src/components/exam/compliance-meter.tsx` |
| Component | apps/web | `src/components/exam/exam-metadata-form.tsx` |
| Template | apps/web | `src/components/templates/exam-builder-template.tsx` |
| API Tests | apps/server | `src/modules/exam/__tests__/exam-builder.service.test.ts` |
| API Tests | apps/server | `src/modules/exam/__tests__/exam-builder.controller.test.ts` |
| E2E | apps/web | `e2e/exam-builder.spec.ts` |

## Dependencies
- **Blocks:** S-F-27-1 (exam must be built before assignment)
- **Blocked by:** S-F-26-1 (blueprint model), S-F-26-2 (recommendation engine)
- **Cross-epic:** none

## Notes
- Use @dnd-kit for drag-and-drop (accessible, performant).
- Compliance meter recalculates on every item add/remove; debounce for performance.
- Autosave uses optimistic updates with conflict resolution.
- Exam state stored in Supabase `exams` table with status = 'draft'.
- DualWriteService: (Exam)-[:INCLUDES]->(Item) relationships in Neo4j.
