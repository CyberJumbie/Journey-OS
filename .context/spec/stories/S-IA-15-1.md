# S-IA-15-1: FULFILLS Workflow

**Epic:** E-15 (Objective Mapping & Framework Linking)
**Feature:** F-07
**Sprint:** 5
**Lane:** institutional_admin (P2)
**Size:** M

## User Story
As an **Institutional Admin**, I need a 2-step approval workflow for SLO-to-ILO FULFILLS proposals so that curriculum alignment decisions are reviewed before becoming official.

## Acceptance Criteria
- [ ] 2-step approval gate: Step 1 (Course Director proposes), Step 2 (Institutional Admin approves)
- [ ] Proposal states: draft, proposed, approved, rejected
- [ ] Course Director creates FULFILLS proposal with justification text
- [ ] Institutional Admin reviews: approve (with optional note) or reject (with required reason)
- [ ] Notification placeholder: interface for notifying reviewer when proposal is submitted
- [ ] Approved FULFILLS relationship created in Neo4j: `(SLO)-[:FULFILLS {status: 'approved'}]->(ILO)`
- [ ] Rejection allows re-proposal with updated justification
- [ ] 10-12 API tests for proposal creation, 2-step approval, rejection, re-proposal, permission enforcement

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/objective/fulfills-workflow.types.ts` |
| Service | apps/server | `src/services/fulfillsWorkflow.service.ts` |
| Repository | apps/server | `src/repositories/fulfillsWorkflow.repository.ts` |
| Tests | apps/server | `src/tests/fulfillsWorkflow.service.test.ts` |

## Dependencies
- **Blocks:** S-IA-15-3, S-IA-15-4
- **Blocked by:** S-IA-14-1 (ILOs must exist), S-IA-14-2 (SLOs must exist)
- **Cross-epic:** S-IA-09-1 (basic FULFILLS relationship from E-09)

## Notes
- This extends S-IA-09-1 with a more formal 2-step workflow (E-09 had a simpler approval gate)
- FulfillsWorkflow builds on the FULFILLS types from S-IA-09-1 but adds draft state and re-proposal
- Justification text helps Institutional Admin understand the alignment rationale
- Notification is an interface only here; actual notification system is E-34 (future sprint)
- Custom error classes: `FulfillsAlreadyProposedError`, `FulfillsNotInReviewableStateError`
