# S-F-34-4: Bell Dropdown Component

**Epic:** E-34 (Notification System)
**Feature:** F-16
**Sprint:** 19
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **Faculty member**, I need a bell icon in the header with an unread badge and notification dropdown so that I can quickly see and manage recent notifications.

## Acceptance Criteria
- [ ] Bell icon in header with unread count badge (red dot with number)
- [ ] Badge hidden when unread count is 0; shows "99+" for counts over 99
- [ ] Click opens dropdown/popover with notification list
- [ ] Each notification: icon (by type), title, body preview, time ago, read/unread indicator
- [ ] Click notification: marks as read + navigates to relevant page (e.g., batch detail, review queue)
- [ ] "Mark all as read" button at top of dropdown
- [ ] "View all" link to full notifications page
- [ ] Real-time updates: new notifications appear in dropdown via Socket.io listener
- [ ] Animation: subtle pulse on bell icon when new notification arrives
- [ ] 8-12 API tests: notification list, mark as read, mark all read, navigation links
- [ ] TypeScript strict, named exports only

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Controller | apps/server | `src/controllers/notification/notification.controller.ts` |
| View | apps/web | `src/components/notification/BellDropdown.tsx`, `src/components/notification/NotificationList.tsx`, `src/components/notification/NotificationItem.tsx`, `src/app/(dashboard)/notifications/page.tsx` |
| Hooks | apps/web | `src/hooks/useNotifications.ts`, `src/hooks/useSocketNotifications.ts` |
| Tests | apps/server | `src/tests/notification/notification.controller.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-F-34-2 (Socket.io service exists for real-time updates)
- **Cross-epic:** none

## Notes
- Bell icon: shadcn/ui icon (Lucide `Bell`) with positioned badge overlay
- Dropdown: shadcn/ui Popover with fixed height scrollable list (max 10 recent items)
- `useNotifications` hook: fetches initial list, listens for Socket.io `notification:new` events
- Navigation mapping: each notification type maps to a target URL via type-specific resolver
- Time ago: use `date-fns` `formatDistanceToNow` for relative timestamps
- Design tokens for badge color, notification type icons, read/unread text weight
- Consider notification sound (optional, user preference in E-38)
