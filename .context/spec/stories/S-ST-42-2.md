# S-ST-42-2: Mastery Breakdown Component

**Epic:** E-42 (Student Dashboard)
**Feature:** F-20
**Sprint:** 27
**Lane:** student (P4)
**Size:** M

## User Story
As a **medical student**, I need to see concept-level progress bars for each USMLE system so that I can identify which specific topics need more study time.

## Acceptance Criteria
- [ ] Expandable section per USMLE system showing child concepts
- [ ] Progress bar per concept with percentage label
- [ ] Color coding: mastered (green >80%), in-progress (yellow 50-80%), weak (red <50%)
- [ ] Sort concepts by mastery (weakest first by default)
- [ ] Toggle sort: weakest-first vs alphabetical
- [ ] Concept count badge per system (e.g., "12/45 mastered")
- [ ] Clicking a concept links to practice session for that concept (disabled until Sprint 32)
- [ ] Mock data service provides realistic concept-level mastery
- [ ] Smooth expand/collapse animation
- [ ] Accessible: proper ARIA labels on progress bars

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/student/mastery.types.ts` (extend) |
| Service | apps/server | `src/modules/student/services/mock-mastery.service.ts` (extend) |
| Controller | apps/server | `src/modules/student/controllers/student-dashboard.controller.ts` (extend) |
| View | apps/web | `src/components/student/mastery-breakdown.tsx` |
| Component | apps/web | `src/components/student/concept-progress-bar.tsx` |
| Component | apps/web | `src/components/student/system-mastery-section.tsx` |
| API Tests | apps/server | `src/modules/student/__tests__/mock-mastery.service.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-ST-42-1 (dashboard page exists)
- **Cross-epic:** Mock data until S-ST-40-3 (BKT mastery estimation) is ready in Sprint 31

## Notes
- Progress bar is a reusable atom component in packages/ui.
- Mock mastery service should generate data for all 12 USMLE systems with 20-50 concepts each.
- Consider virtualized list for performance if concept count exceeds 200.
