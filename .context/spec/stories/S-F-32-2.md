# S-F-32-2: KPI Strip Component

**Epic:** E-32 (Faculty Dashboard)
**Feature:** F-15
**Sprint:** 8
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **Faculty member**, I need a KPI strip showing key metrics with trend indicators so that I can track my question generation productivity and quality at a glance.

## Acceptance Criteria
- [ ] KPIStrip organism renders 4 metric cards in a horizontal row
- [ ] Metrics: Questions Generated (total), Approval Rate (%), Coverage (%), Time Saved (hours)
- [ ] Each card shows: metric label, current value, trend arrow (up/down/flat), trend percentage vs. previous period
- [ ] Trend period selectable: Last 7 days, Last 30 days, This semester
- [ ] Data fetched from `/api/dashboard/kpis?user_id=X&period=7d`
- [ ] KPI values scoped to current user's courses (faculty) or all courses (course director/admin)
- [ ] Responsive: 4 columns on desktop, 2x2 grid on tablet, stacked on mobile
- [ ] Loading skeleton while data fetches
- [ ] 8-10 API tests: rendering, metric calculations, trend computation, period switching, role-based scoping
- [ ] Named exports only, TypeScript strict, design tokens only

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/dashboard/kpi.types.ts` |
| Atoms | packages/ui | `src/atoms/kpi-card.tsx`, `src/atoms/trend-indicator.tsx` |
| Molecules | packages/ui | `src/molecules/kpi-strip.tsx` |
| Service | apps/server | `src/services/dashboard/kpi.service.ts` |
| Controller | apps/server | `src/controllers/dashboard.controller.ts` |
| Hooks | apps/web | `src/hooks/use-dashboard-kpis.ts` |
| Tests | apps/web | `src/tests/dashboard/kpi-strip.test.tsx` |
| Tests | apps/server | `src/tests/dashboard/kpi.service.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-U-01-3 (auth/RBAC for role-based scoping)
- **Cross-epic:** none

## Notes
- Questions Generated: `COUNT(*) FROM questions WHERE creator_id = $userId AND created_at > $periodStart`
- Approval Rate: `COUNT(status='approved') / COUNT(status IN ('approved','rejected'))` for the period
- Coverage: average coverage score across user's courses from latest coverage snapshot
- Time Saved: estimated based on questions generated x average manual authoring time (configurable, default 45 min/question)
- Trend calculation: `((current_period_value - previous_period_value) / previous_period_value) * 100`
- KPI card uses design tokens: `--color-trend-positive` (green), `--color-trend-negative` (red), `--color-trend-neutral` (gray)
