# S-IA-37-2: Golden Dataset Service

**Epic:** E-37 (KaizenML Linting & Golden Dataset)
**Feature:** F-17
**Sprint:** 15
**Lane:** institutional_admin (P2)
**Size:** M

## User Story
As an **Institutional Admin**, I need a golden dataset regression suite of 50 curated items so that generation quality drift is detected automatically against a known-good baseline.

## Acceptance Criteria
- [ ] Golden dataset: 50 curated question-answer pairs with expected scores
- [ ] Regression test: run generation pipeline on golden prompts and compare output quality
- [ ] Drift detection: flag if average composite score drops > 0.5 from baseline
- [ ] Per-metric drift: flag individual metrics that degrade > 1.0 from baseline
- [ ] Regression results stored with timestamp for trend analysis
- [ ] Golden dataset CRUD: add, remove, update items (superadmin/institutional_admin only)
- [ ] Inngest scheduled run: weekly regression (configurable)
- [ ] Drift alert triggers `kaizen.drift.detected` event
- [ ] Custom error class: `GoldenDatasetError`
- [ ] 10-14 API tests: regression run, drift detection, per-metric drift, CRUD operations, trend query
- [ ] TypeScript strict, named exports only

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/kaizen/golden-dataset.types.ts` |
| Model | apps/server | `src/models/golden-dataset-item.model.ts` |
| Repository | apps/server | `src/repositories/golden-dataset.repository.ts` |
| Service | apps/server | `src/services/kaizen/golden-dataset.service.ts`, `src/services/kaizen/drift-detection.service.ts` |
| Inngest | apps/server | `src/inngest/functions/kaizen-regression.fn.ts` |
| Tests | apps/server | `src/tests/kaizen/golden-dataset.test.ts`, `src/tests/kaizen/drift-detection.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-IA-37-1 (lint engine infrastructure exists)
- **Cross-epic:** none

## Notes
- Golden dataset should cover diversity: different question types, Bloom levels, difficulty, clinical domains
- Baseline scores captured when golden items are first curated (snapshot of "known good" generation)
- Drift detection uses statistical comparison: mean + standard deviation from baseline
- Consider versioning golden dataset — when items are updated, preserve historical baselines
- Weekly schedule preferred over nightly (regression is expensive — runs 50 full generations)
- Regression results feed into the admin dashboard KPI cards (E-36)
