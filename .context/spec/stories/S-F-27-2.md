# S-F-27-2: Exam Export

**Epic:** E-27 (Exam Assignment & Export)
**Feature:** F-12
**Sprint:** 30
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **faculty member**, I need to export an exam in platform-compatible formats so that I can deliver it through external assessment systems (e.g., ExamSoft, Canvas).

## Acceptance Criteria
- [ ] Export formats: QTI 2.1 (IMS standard), CSV, JSON
- [ ] QTI export includes item metadata, correct answers, and distractors
- [ ] CSV export with columns: question, option A-E, correct answer, system, discipline, Bloom
- [ ] JSON export matches internal data model for re-import
- [ ] Export includes exam metadata: title, time limit, passing score, blueprint reference
- [ ] Download as ZIP file containing all items and metadata
- [ ] Export audit log entry (who exported, when, format)
- [ ] API endpoint: GET /api/exams/:id/export?format=qti|csv|json
- [ ] Only exams in 'assigned' or 'completed' status can be exported
- [ ] Progress indicator for large exam exports

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/exam/export.types.ts` |
| Service | apps/server | `src/modules/exam/services/exam-export.service.ts` |
| Service | apps/server | `src/modules/exam/services/exporters/qti-exporter.ts` |
| Service | apps/server | `src/modules/exam/services/exporters/csv-exporter.ts` |
| Service | apps/server | `src/modules/exam/services/exporters/json-exporter.ts` |
| Controller | apps/server | `src/modules/exam/controllers/exam-export.controller.ts` |
| Route | apps/server | `src/modules/exam/routes/exam-export.routes.ts` |
| View | apps/web | `src/components/exam/export-dialog.tsx` |
| API Tests | apps/server | `src/modules/exam/__tests__/exam-export.service.test.ts` |
| API Tests | apps/server | `src/modules/exam/__tests__/qti-exporter.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-F-27-1 (exam must be assigned)
- **Cross-epic:** none

## Notes
- QTI 2.1 is the IMS Global standard for assessment interoperability.
- Exporter pattern: strategy pattern with common interface, swappable format implementations.
- ZIP generation uses `archiver` npm package.
- Large exports (500+ items) should use streaming response.
