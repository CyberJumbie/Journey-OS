# S-F-20-3: Batch Progress UI

**Epic:** E-20 (Bulk Generation)
**Feature:** F-09
**Sprint:** 14
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **Faculty member**, I need a real-time progress view for batch generation so that I can monitor completion status, success rates, and errors as items are generated.

## Acceptance Criteria
- [ ] Progress bar showing completed/total items with percentage
- [ ] Status breakdown: completed, in_progress, failed, pending counts
- [ ] SSE stream for real-time updates (not polling)
- [ ] Individual item status list: scrollable feed of generated items with pass/fail indicators
- [ ] Error details: expandable row showing validation failures or generation errors per item
- [ ] Estimated time remaining based on current throughput rate
- [ ] Batch summary card: config recap, start time, elapsed time, throughput rate
- [ ] Auto-scroll to latest item with option to pause scroll
- [ ] 8-12 API tests: SSE connection, progress calculation, status updates, error reporting
- [ ] TypeScript strict, named exports only

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/generation/batch-progress.types.ts` |
| Controller | apps/server | `src/controllers/generation/batch-progress.controller.ts` |
| SSE | apps/server | `src/services/generation/batch-sse.service.ts` |
| View | apps/web | `src/app/(dashboard)/faculty/generate/batch/[batchId]/page.tsx`, `src/components/generation/BatchProgressBar.tsx`, `src/components/generation/BatchItemFeed.tsx` |
| Tests | apps/server | `src/tests/generation/batch-progress.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-F-20-1 (batch pipeline exists to monitor)
- **Cross-epic:** none

## Notes
- SSE endpoint: `GET /api/generation/batch/:batchId/progress` with `text/event-stream` content type
- Event types: `item.started`, `item.completed`, `item.failed`, `batch.progress`, `batch.complete`
- Throughput rate: rolling average of last 10 completions
- Consider persisting progress snapshots so page refresh doesn't lose context
- Progress view accessible from batch history list (navigable after leaving page)
- Design tokens for status colors: success (green), error (red), pending (gray), in_progress (blue)
