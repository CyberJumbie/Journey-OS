# S-AD-45-3: Intervention Logging

**Epic:** E-45 (Advisor Cohort Dashboard & Interventions)
**Feature:** F-21
**Sprint:** 38
**Lane:** advisor (P5)
**Size:** M

## User Story
As an **academic advisor**, I need to log interventions I take with students and track their outcomes so that I can evaluate effectiveness and maintain an auditable record.

## Acceptance Criteria
- [ ] Intervention log form: action taken, date, notes, linked recommendation (if any)
- [ ] Intervention types: meeting, email, study plan, tutoring referral, resource share, other
- [ ] Outcome tracking: follow-up status (pending, improved, no change, declined)
- [ ] Follow-up reminder: set date for follow-up check
- [ ] Intervention timeline per student showing all logged actions
- [ ] CRUD operations for intervention records
- [ ] Link intervention to risk flag (resolves flag on positive outcome)
- [ ] API endpoints: POST/GET/PATCH /api/interventions
- [ ] Audit trail: who logged, when, modifications
- [ ] Filter interventions by student, type, date range, outcome

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/advisor/intervention.types.ts` (extend) |
| Model | apps/server | `src/modules/advisor/models/intervention.model.ts` |
| Repository | apps/server | `src/modules/advisor/repositories/intervention.repository.ts` |
| Service | apps/server | `src/modules/advisor/services/intervention-logging.service.ts` |
| Controller | apps/server | `src/modules/advisor/controllers/intervention-logging.controller.ts` |
| Route | apps/server | `src/modules/advisor/routes/intervention.routes.ts` (extend) |
| View | apps/web | `src/components/advisor/intervention-log-form.tsx` |
| View | apps/web | `src/components/advisor/intervention-timeline.tsx` |
| API Tests | apps/server | `src/modules/advisor/__tests__/intervention-logging.service.test.ts` |
| API Tests | apps/server | `src/modules/advisor/__tests__/intervention.repository.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-AD-45-1 (dashboard context), S-AD-45-2 (recommendation linkage)
- **Cross-epic:** Follow-up reminders connect to E-34 (notification system)

## Notes
- DualWriteService: Supabase `interventions` table, then Neo4j (Advisor)-[:INTERVENED]->(Student) with properties.
- Intervention-to-flag linkage: resolving an intervention can close the associated risk flag.
- Follow-up reminders are stored as scheduled events; actual delivery via notification system (E-34).
- This data is valuable for institutional analytics (S-AD-45-4).
