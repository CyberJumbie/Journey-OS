# S-IA-36-1: Admin Dashboard Page

**Epic:** E-36 (Admin Dashboard & KPIs)
**Feature:** F-17
**Sprint:** 9
**Lane:** institutional_admin (P2)
**Size:** M

## User Story
As an **Institutional Admin**, I need a system-wide health dashboard with KPI cards so that I can monitor platform health, usage trends, and data integrity across my institution at a glance.

## Acceptance Criteria
- [ ] AdminDashboardPage: KPI cards row + system health section + quick actions
- [ ] KPI cards: Total Users, Active Courses, Questions Generated, Sync Health (%)
- [ ] Each KPI card shows: value, trend vs. previous period, sparkline mini-chart
- [ ] System health section: API response time (p95), error rate (last 24h), storage usage
- [ ] Quick actions: "Manage Users", "View Coverage", "View Sync Status", "Browse Knowledge Graph"
- [ ] Auto-refresh: KPIs update every 60 seconds
- [ ] Data fetched from `GET /api/admin/dashboard/kpis` and `GET /api/admin/dashboard/health`
- [ ] AdminDashboardService aggregates metrics from Supabase tables
- [ ] 8-10 API tests: KPI rendering, metric accuracy, auto-refresh, health status, quick action links
- [ ] Named exports only, TypeScript strict, design tokens only

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/admin/dashboard.types.ts` |
| Service | apps/server | `src/services/admin/admin-dashboard.service.ts` |
| Controller | apps/server | `src/controllers/admin/dashboard.controller.ts` |
| Atoms | packages/ui | `src/atoms/sparkline.tsx` |
| Molecules | packages/ui | `src/molecules/admin-kpi-card.tsx`, `src/molecules/quick-action-card.tsx` |
| Templates | apps/web | `src/components/admin/admin-dashboard-page.tsx` |
| Pages | apps/web | `src/app/(institutional-admin)/admin/dashboard/page.tsx` |
| Hooks | apps/web | `src/hooks/use-admin-dashboard.ts` |
| Tests | apps/server | `src/tests/admin/admin-dashboard.test.ts` |
| Tests | apps/web | `src/tests/admin/admin-dashboard-page.test.tsx` |

## Dependencies
- **Blocks:** S-IA-36-2, S-IA-36-4
- **Blocked by:** S-U-01-3 (auth/RBAC), S-SA-04-3 (institution exists)
- **Cross-epic:** S-U-01-3 (Sprint 3 auth), S-SA-04-3 (Sprint 4 institutions)

## Notes
- Institutional Admin route: `/admin/dashboard` under `(institutional-admin)` route group
- Sync Health KPI: percentage of records with `sync_status = 'synced'` across all dual-written tables
- Sparkline uses lightweight inline SVG rendering (no full charting library needed)
- Auto-refresh: `useInterval` hook with 60s polling; pause when tab is not visible (Page Visibility API)
- System health metrics sourced from application monitoring (stored in `system_metrics` table or computed live)
- Quick action cards use icon + label + description pattern; navigate to respective pages on click
