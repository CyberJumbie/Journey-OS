# S-F-11-3: Processing Progress UI

**Epic:** E-11 (Content Processing Pipeline)
**Feature:** F-05
**Sprint:** 4
**Lane:** faculty (P3)
**Size:** M

## User Story
As a **Faculty member**, I need real-time processing status updates so that I can see how my uploaded content progresses through the pipeline.

## Acceptance Criteria
- [ ] SSE endpoint: GET /content/:id/progress streams pipeline events
- [ ] Events: `stage_started`, `stage_completed`, `stage_error`, `pipeline_completed`
- [ ] Each event includes: stage name, progress percentage, timestamp, error details (if any)
- [ ] Progress UI component showing current stage and overall progress bar
- [ ] Stage indicators: parse (25%), clean (50%), chunk (75%), embed (100%)
- [ ] Error state display with retry button
- [ ] Auto-reconnect on SSE connection drop
- [ ] Controller emits SSE events from Inngest pipeline callbacks
- [ ] 8-10 API tests for SSE event format, stage transitions, error events

## Implementation Layers
| Layer | Package | Files |
|-------|---------|-------|
| Types | packages/types | `src/content/progress.types.ts` |
| Controller | apps/server | `src/controllers/progress.controller.ts` |
| Route | apps/server | `src/routes/progress.routes.ts` |
| SSE Service | apps/server | `src/services/sse.service.ts` |
| View - Progress | apps/web | `src/components/organisms/ProcessingProgress/ProcessingProgress.tsx` |
| View - Stage | apps/web | `src/components/molecules/PipelineStageIndicator.tsx` |
| Tests | apps/server | `src/tests/progress.controller.test.ts` |

## Dependencies
- **Blocks:** none
- **Blocked by:** S-F-11-1 (pipeline must emit events)
- **Cross-epic:** none

## Notes
- SSE (Server-Sent Events) for streaming per architecture rules; Socket.io is for presence only
- SSE connection kept alive with heartbeat every 30 seconds
- Pipeline stages write progress to a Redis pub/sub channel; SSE controller subscribes and forwards
- ProcessingProgress is an Organism with PipelineStageIndicator Molecules
- Use design tokens for progress bar colors: blue (in progress), green (complete), red (error)
- Auto-reconnect uses EventSource with exponential backoff (1s, 2s, 4s, max 30s)
