# docs/coverage.yaml — Progress tracking with persona lanes
project: "Journey OS"
updated: "2026-02-20"

# Spec pipeline completion
spec_status:
  classify: done
  personas: done
  features: done           # 21 features (T0: 10, T1: 8, T2: 3)
  user_flows: done          # 35 flows (T0: 17, T1: 13, T2: 5)
  epics: done               # 45 epics across 21 features
  decompose_all: done       # 166 stories across 45 epics, 26 sprints
  prioritize: done         # 166 stories ordered across 6 lanes, 41 cross-lane deps
  briefs: done          # 166/166 — all lanes complete
  ready_for_development: true

# Per-lane backlog tracking
lanes:
  universal:
    priority: 0
    total: 14       # E-01: 4, E-02: 4, E-03: 2, E-16: 4
    done: 14        # U-1..U-14 — ALL UNIVERSAL STORIES COMPLETE
    ready: 0
    blocked: 0
  superadmin:
    priority: 1
    total: 9        # E-04: 4, E-05: 3, E-07: 2
    done: 9         # SA-1 (Waitlist Application), SA-2 (Global User Directory), SA-3 (Application Review Queue), SA-4 (User Reassignment), SA-5 (Approval Workflow), SA-6 (Rejection Workflow), SA-7 (Institution List Dashboard), SA-8 (Suspend/Reactivate), SA-9 (Institution Detail View) — LANE COMPLETE
    ready: 0
    blocked: 0
  institutional_admin:
    priority: 2
    total: 44       # E-06: 3, E-09: 3, E-14: 4, E-15: 4, E-17: 4, E-28: 5, E-29: 3, E-30: 3, E-31: 3, E-33: 4, E-36: 4, E-37: 4
    done: 6         # IA-1 (User List & Invitation), IA-2 (SLO Model & Repository), IA-4 (ILO Model & Repository), IA-5 (Admin Dashboard), IA-6 (Framework List Page), IA-12 (KaizenML Lint Rule Engine)
    ready: 6        # IA-8 (Course Oversight), IA-14 (SLO Management UI), IA-17 (User Deactivation), IA-18 (Role Assignment), IA-22 (SLO-to-ILO Linking), IA-23 (ILO Management UI)
    blocked: 32
  faculty:
    priority: 3
    total: 75       # E-08: 4, E-10: 3, E-11: 4, E-12: 4, E-13: 3, E-18: 4, E-19: 4, E-20: 4, E-21: 4, E-22: 3, E-23: 4, E-24: 4, E-25: 4, E-26: 4, E-27: 4, E-32: 4, E-34: 4, E-35: 3, E-38: 3, E-39: 4
    done: 11        # F-1 (Course Model & Repository), F-2 (Notification Model & Repository), F-3 (Import Parser), F-4 (Template Model & CRUD), F-5 (Profile Page), F-6 (Activity Feed), F-7 (KPI Strip), F-8 (Help Pages), F-9 (Upload Dropzone), F-10 (Socket.io Notification), F-11 (Course Hierarchy)
    ready: 5        # F-12 (Course Cards), F-13 (Course List), F-14 (Template Management), F-15 (Field Mapping UI), F-20 (Course Creation Wizard)
    blocked: 59     # rest blocked by upstream dependencies
  student:
    priority: 4
    total: 15       # E-40: 4, E-41: 4, E-42: 4, E-43: 3
    done: 0
    ready: 0
    blocked: 15     # all blocked by upstream dependencies
  advisor:
    priority: 5
    total: 9        # E-44: 4, E-45: 5
    done: 0
    ready: 0
    blocked: 9      # all blocked by upstream dependencies

# Completed stories log
completed:
  - id: STORY-U-1
    title: "Supabase Auth Setup"
    lane: universal
    completed: 2026-02-19
    api_tests: 15      # env.config (9) + supabase.config (5) + auth.types (1 suite)
    e2e_tests: 0
  - id: STORY-U-2
    title: "Framework Data Models"
    lane: universal
    completed: 2026-02-19
    api_tests: 39      # framework-types (24) + framework-node.model (15)
    e2e_tests: 0
  - id: STORY-U-3
    title: "Express Auth Middleware"
    lane: universal
    completed: 2026-02-19
    api_tests: 26      # auth.service (14) + auth.middleware (12)
    e2e_tests: 0
  - id: STORY-U-4
    title: "Seed Script Infrastructure"
    lane: universal
    completed: 2026-02-19
    api_tests: 24      # neo4j.config (5) + base-seeder (8) + seed-runner (11)
    e2e_tests: 0
  - id: STORY-U-6
    title: "RBAC Middleware"
    lane: universal
    completed: 2026-02-19
    api_tests: 32      # rbac.service (15) + rbac.middleware (17)
    e2e_tests: 0
  - id: STORY-U-5
    title: "Forgot Password Flow"
    lane: universal
    completed: 2026-02-19
    api_tests: 19      # password-reset.service (7) + password-reset.controller (6) + rate-limiter.middleware (6)
    e2e_tests: 0
  - id: STORY-U-7
    title: "USMLE Seed Data"
    lane: universal
    completed: 2026-02-19
    api_tests: 33      # usmle-seeder (33): construction(3) + seed(8) + queries(3) + verify(6) + idempotency(2) + data-integrity(7) + errors(3) + registered in CLI
    e2e_tests: 0
  - id: STORY-U-8
    title: "Registration Wizard"
    lane: universal
    completed: 2026-02-19
    api_tests: 15      # registration.service (10) + registration.controller (5)
    e2e_tests: 0
  - id: STORY-SA-1
    title: "Waitlist Application Form"
    lane: superadmin
    completed: 2026-02-19
    api_tests: 28      # application.service (16) + application.controller (12)
    e2e_tests: 0
  - id: STORY-SA-2
    title: "Global User Directory"
    lane: superadmin
    completed: 2026-02-19
    api_tests: 22      # global-user.service (7) + global-user.controller (15)
    e2e_tests: 0
  - id: STORY-U-10
    title: "Dashboard Routing"
    lane: universal
    completed: 2026-02-19
    api_tests: 38      # dashboard-routes (38)
    e2e_tests: 0
  - id: STORY-U-11
    title: "Password Reset Page"
    lane: universal
    completed: 2026-02-19
    api_tests: 16      # password-validation (16)
    e2e_tests: 0
  - id: STORY-SA-3
    title: "Application Review Queue"
    lane: superadmin
    completed: 2026-02-20
    api_tests: 20      # application-review.service (6) + application-review.controller (14)
    e2e_tests: 0
  - id: STORY-SA-5
    title: "Approval Workflow"
    lane: superadmin
    completed: 2026-02-20
    api_tests: 17      # institution.service (8) + approval.controller (9)
    e2e_tests: 0
  - id: STORY-SA-4
    title: "User Reassignment"
    lane: superadmin
    completed: 2026-02-20
    api_tests: 21      # user-reassignment.service (12) + user-reassignment.controller (9)
    e2e_tests: 0
  - id: STORY-IA-5
    title: "Admin Dashboard Page"
    lane: institutional_admin
    completed: 2026-02-20
    api_tests: 18      # admin-dashboard.service (12) + dashboard.controller (6)
    e2e_tests: 0
  - id: STORY-U-9
    title: "Invitation Acceptance Flow"
    lane: universal
    completed: 2026-02-20
    api_tests: 25      # invitation-acceptance.service (12) + invitation-acceptance.controller (13)
    e2e_tests: 0
  - id: STORY-U-12
    title: "Remaining Framework Seeds"
    lane: universal
    completed: 2026-02-20
    api_tests: 72      # framework-seeders (72): LCME(12) + ACGME(10) + AAMC(8) + UME(10) + EPA(8) + Bloom(8) + Miller(8) + SeedRunner(8)
    e2e_tests: 0
  - id: STORY-SA-6
    title: "Rejection Workflow"
    lane: superadmin
    completed: 2026-02-20
    api_tests: 16      # rejection.service (7) + rejection.controller (9)
    e2e_tests: 0
  - id: STORY-IA-12
    title: "KaizenML Lint Rule Engine"
    lane: institutional_admin
    completed: 2026-02-20
    api_tests: 23      # lint-engine.service (10) + orphan-concepts.rule (3) + dangling-slo.rule (2) + stale-items.rule (3) + lint.controller (5)
    e2e_tests: 0
  - id: STORY-U-13
    title: "Persona Onboarding Screens"
    lane: universal
    completed: 2026-02-20
    api_tests: 20      # onboarding.service (11) + onboarding.controller (9)
    e2e_tests: 0
  - id: STORY-U-14
    title: "Email Verification Gate"
    lane: universal
    completed: 2026-02-20
    api_tests: 14      # email-verification.middleware (7) + resend-verification.service (7)
    e2e_tests: 0
  - id: STORY-F-1
    title: "Course Model & Repository"
    lane: faculty
    completed: 2026-02-20
    api_tests: 26      # course.model (5) + course.repository (8) + course.service (15) + course.controller (6) — note: some counted as service tests overlap
    e2e_tests: 0
  - id: STORY-F-2
    title: "Notification Model & Repository"
    lane: faculty
    completed: 2026-02-20
    api_tests: 35      # notification.service (23) + notification.controller (12)
    e2e_tests: 0
  - id: STORY-IA-6
    title: "Framework List Page"
    lane: institutional_admin
    completed: 2026-02-20
    api_tests: 15      # framework.service (10) + framework.controller (5)
    e2e_tests: 0
  - id: STORY-SA-7
    title: "Institution List Dashboard"
    lane: superadmin
    completed: 2026-02-20
    api_tests: 15      # institution-monitoring.service (9) + institution-monitoring.controller (6)
    e2e_tests: 0
  - id: STORY-IA-2
    title: "SLO Model & Repository"
    lane: institutional_admin
    completed: 2026-02-20
    api_tests: 21      # slo.service (15) + slo.repository (6)
    e2e_tests: 0
  - id: STORY-F-3
    title: "Import Parser"
    lane: faculty
    completed: 2026-02-20
    api_tests: 14      # csv-parser (4) + qti-parser (3) + text-parser (3) + parser-factory (4)
    e2e_tests: 0
  - id: STORY-F-4
    title: "Template Model & CRUD"
    lane: faculty
    completed: 2026-02-20
    api_tests: 18      # template.service (10) + template.controller (8)
    e2e_tests: 0
  - id: STORY-F-11
    title: "Course Hierarchy"
    lane: faculty
    completed: 2026-02-20
    api_tests: 20      # hierarchy.service (5) + hierarchy.controller (15)
    e2e_tests: 0
  - id: STORY-F-5
    title: "Profile Page"
    lane: faculty
    completed: 2026-02-20
    api_tests: 40      # profile.service (28) + profile.controller (12)
    e2e_tests: 0
  - id: STORY-SA-8
    title: "Suspend/Reactivate Institution"
    lane: superadmin
    completed: 2026-02-20
    api_tests: 24      # institution-lifecycle.service (12) + institution-lifecycle.controller (12)
    e2e_tests: 0
  - id: STORY-SA-9
    title: "Institution Detail View"
    lane: superadmin
    completed: 2026-02-20
    api_tests: 16      # institution-detail.controller (5) + institution-detail.service (11)
    e2e_tests: 0
  - id: STORY-F-9
    title: "Upload Dropzone Component"
    lane: faculty
    completed: 2026-02-20
    api_tests: 23      # upload.controller (13) + upload-service-mapping (1) + upload-validation (9)
    e2e_tests: 0
  - id: STORY-F-10
    title: "Socket.io Notification Service"
    lane: faculty
    completed: 2026-02-20
    api_tests: 20      # socket-manager.service (11) + socket-notification.service (9)
    e2e_tests: 0
  - id: STORY-F-6
    title: "Activity Feed Component"
    lane: faculty
    completed: 2026-02-20
    api_tests: 18      # activity-feed.controller (18): list(5) + pagination(4) + filtering(3) + errors(3) + auth(3)
    e2e_tests: 0
  - id: STORY-F-7
    title: "KPI Strip Component"
    lane: faculty
    completed: 2026-02-20
    api_tests: 16      # kpi.controller (16): getKpis(4) + trend-calc(4) + period-filter(4) + auth(4)
    e2e_tests: 0
  - id: STORY-F-8
    title: "Help & FAQ Pages"
    lane: faculty
    completed: 2026-02-20
    api_tests: 8       # faq.route (8): search(3) + category-filter(2) + scoring(2) + validation(1)
    e2e_tests: 0

# Error-to-rule pipeline
error_pipeline:
  total_errors_captured: 49
  total_rules_created: 41
  recurrence_rate: 5    # tsc-from-root at 10, hardcoded-hex at 2, .select().single() at 1, table-name-verify at 1, no-dom-in-types at 1

# Time allocation tracking
metrics:
  stories_completed: 38
  stories_total: 166
  avg_story_time_minutes: 0    # not tracked yet
  planning_pct: 0    # target: 40%
  review_pct: 0      # target: 40%
  execution_pct: 0   # target: 10%
  learning_pct: 0    # target: 10%
  api_tests_total: 867  # U-1: 15, U-2: 39, U-3: 26, U-4: 9, U-5: 19, U-6: 32, U-7: 33, U-8: 15, U-9: 25, U-10: 38, U-11: 16, U-12: 72, U-13: 20, U-14: 14, SA-1: 28, SA-2: 22, SA-3: 20, SA-4: 21, SA-5: 17, SA-6: 16, SA-7: 15, SA-8: 24, SA-9: 16, IA-2: 21, IA-5: 18, IA-6: 15, IA-12: 23, F-1: 26, F-2: 35, F-3: 14, F-4: 18, F-5: 40, F-6: 18, F-7: 16, F-8: 8, F-9: 23, F-10: 20, F-11: 20
  e2e_tests_total: 0
