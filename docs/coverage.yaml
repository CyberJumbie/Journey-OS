# docs/coverage.yaml — Progress tracking with persona lanes
project: "Journey OS"
updated: "2026-02-19"

# Spec pipeline completion
spec_status:
  classify: done
  personas: done
  features: done           # 21 features (T0: 10, T1: 8, T2: 3)
  user_flows: done          # 35 flows (T0: 17, T1: 13, T2: 5)
  epics: done               # 45 epics across 21 features
  decompose_all: done       # 166 stories across 45 epics, 26 sprints
  prioritize: done         # 166 stories ordered across 6 lanes, 41 cross-lane deps
  briefs: in_progress  # 10/166 — U-1..U-5, U-6, U-7, F-3, F-4, F-8 done
  ready_for_development: false

# Per-lane backlog tracking
lanes:
  universal:
    priority: 0
    total: 14       # E-01: 4, E-02: 4, E-03: 2, E-16: 4
    done: 7         # U-1 (Auth Setup), U-2 (Framework Models), U-3 (Auth Middleware), U-4 (Seed Infra), U-5 (Forgot Password), U-6 (RBAC), U-7 (USMLE Seed)
    ready: 2        # U-8 (Registration Wizard), U-10 (Dashboard Routing)
    blocked: 5
  superadmin:
    priority: 1
    total: 9        # E-04: 4, E-05: 3, E-07: 2
    done: 0
    ready: 0
    blocked: 9      # all blocked by S-U-01-3
  institutional_admin:
    priority: 2
    total: 44       # E-06: 3, E-09: 3, E-14: 4, E-15: 4, E-17: 4, E-28: 5, E-29: 3, E-30: 3, E-31: 3, E-33: 4, E-36: 4, E-37: 4
    done: 0
    ready: 0
    blocked: 44     # all blocked by upstream dependencies
  faculty:
    priority: 3
    total: 75       # E-08: 4, E-10: 3, E-11: 4, E-12: 4, E-13: 3, E-18: 4, E-19: 4, E-20: 4, E-21: 4, E-22: 3, E-23: 4, E-24: 4, E-25: 4, E-26: 4, E-27: 4, E-32: 4, E-34: 4, E-35: 3, E-38: 3, E-39: 4
    done: 0
    ready: 3        # STORY-F-3 (Import Parser), F-4 (Template Model), F-8 (Help Pages) — zero deps
    blocked: 72     # rest blocked by upstream dependencies
  student:
    priority: 4
    total: 15       # E-40: 4, E-41: 4, E-42: 4, E-43: 3
    done: 0
    ready: 0
    blocked: 15     # all blocked by upstream dependencies
  advisor:
    priority: 5
    total: 9        # E-44: 4, E-45: 5
    done: 0
    ready: 0
    blocked: 9      # all blocked by upstream dependencies

# Completed stories log
completed:
  - id: STORY-U-1
    title: "Supabase Auth Setup"
    lane: universal
    completed: 2026-02-19
    api_tests: 15      # env.config (9) + supabase.config (5) + auth.types (1 suite)
    e2e_tests: 0
  - id: STORY-U-2
    title: "Framework Data Models"
    lane: universal
    completed: 2026-02-19
    api_tests: 39      # framework-types (24) + framework-node.model (15)
    e2e_tests: 0
  - id: STORY-U-3
    title: "Express Auth Middleware"
    lane: universal
    completed: 2026-02-19
    api_tests: 26      # auth.service (14) + auth.middleware (12)
    e2e_tests: 0
  - id: STORY-U-4
    title: "Seed Script Infrastructure"
    lane: universal
    completed: 2026-02-19
    api_tests: 24      # neo4j.config (5) + base-seeder (8) + seed-runner (11)
    e2e_tests: 0
  - id: STORY-U-6
    title: "RBAC Middleware"
    lane: universal
    completed: 2026-02-19
    api_tests: 32      # rbac.service (15) + rbac.middleware (17)
    e2e_tests: 0
  - id: STORY-U-5
    title: "Forgot Password Flow"
    lane: universal
    completed: 2026-02-19
    api_tests: 19      # password-reset.service (7) + password-reset.controller (6) + rate-limiter.middleware (6)
    e2e_tests: 0
  - id: STORY-U-7
    title: "USMLE Seed Data"
    lane: universal
    completed: 2026-02-19
    api_tests: 33      # usmle-seeder (33): construction(3) + seed(8) + queries(3) + verify(6) + idempotency(2) + data-integrity(7) + errors(3) + registered in CLI
    e2e_tests: 0

# Error-to-rule pipeline
error_pipeline:
  total_errors_captured: 11
  total_rules_created: 11
  recurrence_rate: 0

# Time allocation tracking
metrics:
  stories_completed: 7
  stories_total: 166
  avg_story_time_minutes: 0    # not tracked yet
  planning_pct: 0    # target: 40%
  review_pct: 0      # target: 40%
  execution_pct: 0   # target: 10%
  learning_pct: 0    # target: 10%
  api_tests_total: 173  # U-1: 15, U-2: 39, U-3: 26, U-4: 9, U-5: 19, U-6: 32, U-7: 33
  e2e_tests_total: 0
