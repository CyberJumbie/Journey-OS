import type { MalwareScanResult } from "@journey-os/types";

/**
 * Malware scan service interface (server-only).
 * Uses Uint8Array instead of Buffer for compatibility with shared types.
 */
export interface IMalwareScanService {
  scan(buffer: Uint8Array, filename: string): Promise<MalwareScanResult>;
}

/**
 * Stub implementation that always returns clean.
 * Real implementation deferred to a future story.
 */
export class MalwareScanStub implements IMalwareScanService {
  async scan(
    _buffer: Uint8Array,
    _filename: string,
  ): Promise<MalwareScanResult> {
    return {
      clean: true,
      scanDurationMs: 0,
      engine: "stub",
      threat: null,
    };
  }
}
